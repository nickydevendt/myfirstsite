{% extends 'index.html.twig' %}

{% block main %}
    <div class="adminalignment">
        <h1>My account</h1>
<!-- this is not working anymore fix this with jquery--!>
        <table class="table blueTable">
            <tr>
                <th>Id</th>
                <th>Firstname</th>
                <th>Prefix</th>
                <th>Lastname</th>
                <th>Email</th>
                <th>Current employer</th>
                <th>Username</th>
                <th>Role</th>
                <th>Action</th>
            </tr>
            <tr>
                <form name="user" action="">
                    <td><input name="id" value="{{ currentUser.id }}" readonly></td>
                    <td><input name="firstname" value="{{ currentUser.firstname }}"></td>
                    <td><input name="prefix" value="{{ currentUser.prefix }}"></td>
                    <td><input name="lastname" value="{{ currentUser.lastname }}"></td>
                    <td><input name="email" value="{{ currentUser.email }}" readonly></td>
                    <td><input name="currentemployer" value="{{ currentUser.currentemployer }}"></td>
                    <td><input name="username" value="{{ currentUser.username }}" readonly></td>
                        {% if currentUser.admin == 1 %}
                            <td><p>User</p></td>
                        {% elseif currentUser.admin == 2 %}
                            <td><p>Admin</p></td>
                        {% endif %}
                    <td>
                        <input class="updatebtn" type="button" value="update user" onClick="updateUser();">
                    </td>
                </form>
            </tr>
        </table>
    </div>
    <div id="succes"></div>
{% endblock%}

{% block text %}
<h1>See my visitors</h1>
{% endblock %}

{% block promotion %}
    <div class="tablealignment">
        <table class="table blueTable" id="visitors" name="visitors">
            <tr>
                <th>Randomid</th>
                <th>Firstname</th>
                <th>Lastname</th>
                <th>Email</th>
                <th>Expire date</th>
                <th>Action</th>
            </tr>
            {% for myVis in myVisitors %}
            <tr>
                <form name="test">
                    <td>{{ myVis.randomid }}</td>
                    <td>{{ myVis.firstname }}</td>
                    <td>{{ myVis.lastname }}</td>
                    <td>{{ myVis.email }}</td>
                    <td>{{ myVis.expiredate }}</td>
                    <td>
                        <input class="deletebtn remove" type="button" name="deletevisitor" value="delete" onClick="deleteVisit({{ myVis.id }});">
                    </td>
                </form>
            </tr>
            {% endfor %}
        </table>
    </div>
    <div class="addvisitoralignment">
        <h3>Add a visitor</h3>
        <table class="table blueTable">
            <tr>
                <th>Firstname</th>
                <th>Lastname</th>
                <th>Email</th>
                <th>Action</th>
            </tr>
            <tr>
                <form name="updatevisitor" action="">
                    <td><input name="firstname" class="inputfield" value=""></td>
                    <td><input name="lastname" class="inputfield" value=""></td>
                    <td><input name="email" class="inputfield" value="" required></td>
                    <td>
                        <input class="registerbtn" type="button" name="addVisitor" value="Add visitor" onClick="addVis();">
                    </td>
                </form>
            </tr>
        </table>
    <h4>Get new password</h4>
    <table class="table blueTable">
        <tr>
            <th>Old password</th>
            <th>New password</th>
            <th>Confirm new password</th>
            <th>Confirm</th>
        </tr>
        <tr>
            <form method="post" action="">
                <input name ="userid" value="{{ currentUser.id }}" hidden>
                <td><input type="password" pattern="(?=^.{8,}$)((?=.*\d)|(?=.*\W+))(?![.\n])(?=.*[A-Z])(?=.*[a-z]).*$" name="oldpw" value="" required></td>
                <td><input type="password" pattern="(?=^.{8,}$)((?=.*\d)|(?=.*\W+))(?![.\n])(?=.*[A-Z])(?=.*[a-z]).*$" name="newpw" value="" required></td>
                <td><input type="password" pattern="(?=^.{8,}$)((?=.*\d)|(?=.*\W+))(?![.\n])(?=.*[A-Z])(?=.*[a-z]).*$" name="confirmnewpw" value="" required></td>
                <td>
                    <button class="updatebtn" type="submit" name="updateuserpassword" value="">Update</button>
                </td>
            </form>
        </tr>
    </table>
    </div>
{% endblock %}
{% block recentprojects %}
{% endblock%}

